\documentclass[11pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{tcolorbox}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{array}
\usepackage{multicol}

% Configuration de la page
\geometry{left=2cm,right=2cm,top=2.5cm,bottom=2.5cm}

% Configuration des couleurs
\definecolor{jupiterBlue}{RGB}{59, 130, 246}
\definecolor{solanaGreen}{RGB}{34, 197, 94}
\definecolor{deauraPurple}{RGB}{168, 85, 247}
\definecolor{codeGray}{RGB}{248, 250, 252}
\definecolor{warningOrange}{RGB}{251, 146, 60}
\definecolor{successGreen}{RGB}{16, 185, 129}

% Configuration des liens
\hypersetup{
    colorlinks=true,
    linkcolor=jupiterBlue,
    filecolor=jupiterBlue,
    urlcolor=jupiterBlue,
    citecolor=jupiterBlue
}

% Configuration des listings
\lstdefinestyle{env}{
    language=bash,
    backgroundcolor=\color{codeGray},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    commentstyle=\color{solanaGreen},
    frame=single,
    keepspaces=true,
    keywordstyle=\color{jupiterBlue},
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny\color{gray},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    stepnumber=1,
    stringstyle=\color{deauraPurple},
    tabsize=2,
}

% Configuration des titres
\titleformat{\section}{\Large\bfseries\color{jupiterBlue}}{\thesection}{1em}{}
\titleformat{\subsection}{\large\bfseries\color{jupiterBlue}}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\bfseries\color{jupiterBlue}}{\thesubsubsection}{1em}{}

% En-t√™te et pied de page
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\textcolor{jupiterBlue}{\textbf{Configuration Management - Jupiter Swap DApp}}}
\fancyhead[R]{\textcolor{jupiterBlue}{\textbf{Configuration Guide}}}
\fancyfoot[C]{\thepage}

\begin{document}

% Page de titre
\begin{titlepage}
    \centering
    \vspace*{1cm}
    
    {\Huge\textbf{\textcolor{jupiterBlue}{Configuration Management}}\par}
    \vspace{0.5cm}
    {\LARGE\textcolor{deauraPurple}{Jupiter Swap DApp}\par}
    \vspace{0.3cm}
    {\Large\textit{Complete Configuration Guide}\par}
    
    \vspace{1.5cm}
    
    \begin{tcolorbox}[colback=jupiterBlue!10,colframe=jupiterBlue,width=0.9\textwidth]
        \centering
        \textbf{‚öôÔ∏è Configuration Management Stack}\\
        \vspace{0.5cm}
        \begin{multicols}{2}
        \textbf{Environment:} Multi-stage configuration\\
        \textbf{Security:} Encrypted API keys\\
        \textbf{Validation:} Runtime type checking\\
        \textbf{Fallbacks:} Graceful degradation\\
        \textbf{Hot Reload:} Development efficiency\\
        \textbf{Secrets:} Secure key management\\
        \textbf{Monitoring:} Configuration tracking\\
        \textbf{Documentation:} Self-documenting config
        \end{multicols}
    \end{tcolorbox}
    
    \vspace{1.5cm}
    
    \begin{tcolorbox}[colback=successGreen!10,colframe=successGreen,width=0.8\textwidth]
        \centering
        \textbf{üéØ Configuration Achievements}\\
        \vspace{0.3cm}
        ‚úÖ 15+ Environment Variables\\
        ‚úÖ Multi-stage Configuration\\
        ‚úÖ Runtime Validation\\
        ‚úÖ Secure API Key Management\\
        ‚úÖ Fallback Mechanisms\\
        ‚úÖ Performance Optimization\\
        ‚úÖ Development Hot Reload\\
        ‚úÖ Production Security
    \end{tcolorbox}
    
    \vfill
    
    {\large\textbf{Author:} Kamel (\href{https://x.com/treizeb__}{@treizeb\_\_})\\
    \textbf{Company:} \href{https://deaura.io}{DeAura.io}\\
    \textbf{Updated:} July 14, 2025\par}
\end{titlepage}

\newpage
\tableofcontents
\newpage

\section{‚öôÔ∏è Environment Variables}

\subsection{Production Configuration}

\begin{lstlisting}[style=env, caption=.env.local (Production)]
# =================================
# JUPITER SWAP DAPP CONFIGURATION
# =================================

# Application Environment
NODE_ENV=production
NEXT_PUBLIC_APP_ENV=production
NEXT_PUBLIC_APP_VERSION=1.0.0

# Solana Network Configuration
NEXT_PUBLIC_SOLANA_NETWORK=mainnet-beta
NEXT_PUBLIC_SOLANA_CLUSTER=mainnet-beta

# =================================
# RPC ENDPOINTS CONFIGURATION
# =================================

# Primary Helius RPC (Paid Tier)
NEXT_PUBLIC_HELIUS_API_KEY=d94d81dd-f2a1-40f7-920d-0dfaf3aaf032
NEXT_PUBLIC_HELIUS_RPC_URL=https://mainnet.helius-rpc.com

# Secondary Alchemy RPC (Paid Tier)
NEXT_PUBLIC_ALCHEMY_API_KEY=UvOk23LRlqGz1m58VCEd3PJ2ZOX2h9KM
NEXT_PUBLIC_ALCHEMY_RPC_URL=https://solana-mainnet.g.alchemy.com/v2

# Fallback RPC Endpoints (Free Tier)
NEXT_PUBLIC_FALLBACK_RPC_URLS=["https://eclipse.helius-rpc.com","https://api.mainnet-beta.solana.com","https://solana-api.projectserum.com"]

# RPC Configuration
NEXT_PUBLIC_RPC_TIMEOUT=30000
NEXT_PUBLIC_RPC_MAX_RETRIES=3
NEXT_PUBLIC_RPC_RETRY_DELAY=1000

# =================================
# JUPITER API CONFIGURATION
# =================================

# Jupiter API v6
NEXT_PUBLIC_JUPITER_API_URL=https://quote-api.jup.ag/v6
NEXT_PUBLIC_JUPITER_PRICE_API_URL=https://price.jup.ag/v4
NEXT_PUBLIC_JUPITER_TOKEN_LIST_URL=https://token.jup.ag/all

# Jupiter Configuration
NEXT_PUBLIC_JUPITER_SLIPPAGE_BPS=50
NEXT_PUBLIC_JUPITER_MAX_ACCOUNTS=64
NEXT_PUBLIC_JUPITER_ENABLE_VERSIONED_TX=true

# =================================
# EXTERNAL APIS CONFIGURATION
# =================================

# CoinGecko API (Price Data)
NEXT_PUBLIC_COINGECKO_API_KEY=CG-your-api-key-here
NEXT_PUBLIC_COINGECKO_API_URL=https://api.coingecko.com/api/v3

# Birdeye API (Alternative Price Source)
NEXT_PUBLIC_BIRDEYE_API_KEY=your-birdeye-api-key
NEXT_PUBLIC_BIRDEYE_API_URL=https://public-api.birdeye.so

# =================================
# SWAP CONFIGURATION
# =================================

# Default Swap Settings
NEXT_PUBLIC_DEFAULT_SLIPPAGE_BPS=50
NEXT_PUBLIC_MAX_SLIPPAGE_BPS=1000
NEXT_PUBLIC_MIN_SLIPPAGE_BPS=1

# Priority Fees (in lamports)
NEXT_PUBLIC_DEFAULT_PRIORITY_FEE=1000
NEXT_PUBLIC_MAX_PRIORITY_FEE=100000
NEXT_PUBLIC_PRIORITY_FEE_MULTIPLIER=1.5

# Transaction Settings
NEXT_PUBLIC_TRANSACTION_TIMEOUT=60000
NEXT_PUBLIC_CONFIRMATION_TIMEOUT=30000
NEXT_PUBLIC_MAX_CONFIRMATION_ATTEMPTS=10

# =================================
# FEATURE FLAGS
# =================================

# Core Features
NEXT_PUBLIC_ENABLE_SWAP=true
NEXT_PUBLIC_ENABLE_LIMIT_ORDERS=false
NEXT_PUBLIC_ENABLE_DCA=false

# Advanced Features
NEXT_PUBLIC_ENABLE_MEV_PROTECTION=true
NEXT_PUBLIC_ENABLE_DYNAMIC_SLIPPAGE=true
NEXT_PUBLIC_ENABLE_SMART_ROUTING=true
NEXT_PUBLIC_ENABLE_FEE_OPTIMIZATION=true

# UI Features
NEXT_PUBLIC_ENABLE_DARK_MODE=true
NEXT_PUBLIC_ENABLE_PRICE_CHARTS=true
NEXT_PUBLIC_ENABLE_TRANSACTION_HISTORY=true
NEXT_PUBLIC_ENABLE_PORTFOLIO_TRACKING=false

# Development Features
NEXT_PUBLIC_ENABLE_DEVTOOLS=false
NEXT_PUBLIC_ENABLE_DEBUG_LOGS=false
NEXT_PUBLIC_ENABLE_PERFORMANCE_MONITORING=true

# =================================
# MONITORING & ANALYTICS
# =================================

# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_AUTH_TOKEN=your-sentry-auth-token
SENTRY_ORG=your-org
SENTRY_PROJECT=jupiter-swap-dapp

# Analytics
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
NEXT_PUBLIC_MIXPANEL_TOKEN=your-mixpanel-token

# Performance Monitoring
NEXT_PUBLIC_ENABLE_WEB_VITALS=true
NEXT_PUBLIC_ENABLE_PERFORMANCE_OBSERVER=true

# =================================
# SECURITY CONFIGURATION
# =================================

# CORS Settings
NEXT_PUBLIC_ALLOWED_ORIGINS=["https://jupiter-swap.deaura.io","https://deaura.io"]

# Content Security Policy
NEXT_PUBLIC_CSP_REPORT_URI=https://your-csp-report-endpoint.com/report

# Rate Limiting
NEXT_PUBLIC_RATE_LIMIT_REQUESTS=100
NEXT_PUBLIC_RATE_LIMIT_WINDOW=60000

# =================================
# CACHE CONFIGURATION
# =================================

# Token List Cache
NEXT_PUBLIC_TOKEN_LIST_CACHE_TTL=3600000
NEXT_PUBLIC_PRICE_CACHE_TTL=30000
NEXT_PUBLIC_QUOTE_CACHE_TTL=15000

# RPC Response Cache
NEXT_PUBLIC_RPC_CACHE_TTL=10000
NEXT_PUBLIC_ACCOUNT_CACHE_TTL=5000

# =================================
# UI CONFIGURATION
# =================================

# Theme Configuration
NEXT_PUBLIC_DEFAULT_THEME=dark
NEXT_PUBLIC_BRAND_COLOR=#3B82F6
NEXT_PUBLIC_ACCENT_COLOR=#8B5CF6

# Wallet Configuration
NEXT_PUBLIC_SUPPORTED_WALLETS=["phantom","solflare","backpack","glow","slope"]
NEXT_PUBLIC_AUTO_CONNECT_WALLET=false

# =================================
# DEVELOPMENT CONFIGURATION
# =================================

# Development URLs
NEXT_PUBLIC_DEV_API_URL=http://localhost:3000/api
NEXT_PUBLIC_DEV_WS_URL=ws://localhost:3001

# Development Features
NEXT_PUBLIC_DEV_MOCK_WALLET=false
NEXT_PUBLIC_DEV_MOCK_TRANSACTIONS=false
NEXT_PUBLIC_DEV_SKIP_CONFIRMATIONS=false
\end{lstlisting}

\subsection{Development Configuration}

\begin{lstlisting}[style=env, caption=.env.development]
# =================================
# DEVELOPMENT ENVIRONMENT
# =================================

NODE_ENV=development
NEXT_PUBLIC_APP_ENV=development
NEXT_PUBLIC_APP_VERSION=1.0.0-dev

# Development Network (Use devnet for testing)
NEXT_PUBLIC_SOLANA_NETWORK=devnet
NEXT_PUBLIC_SOLANA_CLUSTER=devnet

# Development RPC (Free endpoints for development)
NEXT_PUBLIC_HELIUS_API_KEY=d94d81dd-f2a1-40f7-920d-0dfaf3aaf032
NEXT_PUBLIC_HELIUS_RPC_URL=https://devnet.helius-rpc.com

# Development Jupiter API
NEXT_PUBLIC_JUPITER_API_URL=https://quote-api.jup.ag/v6
NEXT_PUBLIC_JUPITER_PRICE_API_URL=https://price.jup.ag/v4

# Development Features Enabled
NEXT_PUBLIC_ENABLE_DEVTOOLS=true
NEXT_PUBLIC_ENABLE_DEBUG_LOGS=true
NEXT_PUBLIC_ENABLE_PERFORMANCE_MONITORING=true

# Development Wallet Settings
NEXT_PUBLIC_DEV_MOCK_WALLET=true
NEXT_PUBLIC_AUTO_CONNECT_WALLET=true

# Relaxed Security for Development
NEXT_PUBLIC_ALLOWED_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000"]

# Development Cache Settings (Shorter TTL)
NEXT_PUBLIC_TOKEN_LIST_CACHE_TTL=60000
NEXT_PUBLIC_PRICE_CACHE_TTL=5000
NEXT_PUBLIC_QUOTE_CACHE_TTL=3000
\end{lstlisting}

\section{üîß Configuration Management System}

\subsection{Configuration Validation}

\begin{lstlisting}[style=env, caption=src/utils/config-validation.ts]
/**
 * Configuration Validation System
 * Ensures all required environment variables are present and valid
 */

import { z } from 'zod';

// Environment variable schema
const configSchema = z.object({
  // Application
  NODE_ENV: z.enum(['development', 'production', 'test']),
  NEXT_PUBLIC_APP_ENV: z.enum(['development', 'staging', 'production']),
  NEXT_PUBLIC_APP_VERSION: z.string().min(1),
  
  // Solana Network
  NEXT_PUBLIC_SOLANA_NETWORK: z.enum(['mainnet-beta', 'devnet', 'testnet']),
  NEXT_PUBLIC_SOLANA_CLUSTER: z.enum(['mainnet-beta', 'devnet', 'testnet']),
  
  // API Keys (optional in development)
  NEXT_PUBLIC_HELIUS_API_KEY: z.string().optional(),
  NEXT_PUBLIC_ALCHEMY_API_KEY: z.string().optional(),
  NEXT_PUBLIC_COINGECKO_API_KEY: z.string().optional(),
  
  // API URLs
  NEXT_PUBLIC_JUPITER_API_URL: z.string().url(),
  NEXT_PUBLIC_JUPITER_PRICE_API_URL: z.string().url(),
  
  // Numeric configurations
  NEXT_PUBLIC_DEFAULT_SLIPPAGE_BPS: z.coerce.number().min(1).max(10000),
  NEXT_PUBLIC_MAX_SLIPPAGE_BPS: z.coerce.number().min(1).max(10000),
  NEXT_PUBLIC_DEFAULT_PRIORITY_FEE: z.coerce.number().min(0),
  
  // Timeouts
  NEXT_PUBLIC_TRANSACTION_TIMEOUT: z.coerce.number().min(1000),
  NEXT_PUBLIC_CONFIRMATION_TIMEOUT: z.coerce.number().min(1000),
  
  // Feature flags
  NEXT_PUBLIC_ENABLE_SWAP: z.coerce.boolean().default(true),
  NEXT_PUBLIC_ENABLE_MEV_PROTECTION: z.coerce.boolean().default(true),
  NEXT_PUBLIC_ENABLE_DYNAMIC_SLIPPAGE: z.coerce.boolean().default(true),
  NEXT_PUBLIC_ENABLE_DEVTOOLS: z.coerce.boolean().default(false),
  
  // Cache TTLs
  NEXT_PUBLIC_TOKEN_LIST_CACHE_TTL: z.coerce.number().min(1000),
  NEXT_PUBLIC_PRICE_CACHE_TTL: z.coerce.number().min(1000),
  NEXT_PUBLIC_QUOTE_CACHE_TTL: z.coerce.number().min(1000),
});

type Config = z.infer<typeof configSchema>;

// Validate and parse configuration
export function validateConfig(): Config {
  try {
    const config = configSchema.parse({
      // Application
      NODE_ENV: process.env.NODE_ENV,
      NEXT_PUBLIC_APP_ENV: process.env.NEXT_PUBLIC_APP_ENV,
      NEXT_PUBLIC_APP_VERSION: process.env.NEXT_PUBLIC_APP_VERSION,
      
      // Solana Network
      NEXT_PUBLIC_SOLANA_NETWORK: process.env.NEXT_PUBLIC_SOLANA_NETWORK,
      NEXT_PUBLIC_SOLANA_CLUSTER: process.env.NEXT_PUBLIC_SOLANA_CLUSTER,
      
      // API Keys
      NEXT_PUBLIC_HELIUS_API_KEY: process.env.NEXT_PUBLIC_HELIUS_API_KEY,
      NEXT_PUBLIC_ALCHEMY_API_KEY: process.env.NEXT_PUBLIC_ALCHEMY_API_KEY,
      NEXT_PUBLIC_COINGECKO_API_KEY: process.env.NEXT_PUBLIC_COINGECKO_API_KEY,
      
      // API URLs
      NEXT_PUBLIC_JUPITER_API_URL: process.env.NEXT_PUBLIC_JUPITER_API_URL,
      NEXT_PUBLIC_JUPITER_PRICE_API_URL: process.env.NEXT_PUBLIC_JUPITER_PRICE_API_URL,
      
      // Numeric configurations
      NEXT_PUBLIC_DEFAULT_SLIPPAGE_BPS: process.env.NEXT_PUBLIC_DEFAULT_SLIPPAGE_BPS,
      NEXT_PUBLIC_MAX_SLIPPAGE_BPS: process.env.NEXT_PUBLIC_MAX_SLIPPAGE_BPS,
      NEXT_PUBLIC_DEFAULT_PRIORITY_FEE: process.env.NEXT_PUBLIC_DEFAULT_PRIORITY_FEE,
      
      // Timeouts
      NEXT_PUBLIC_TRANSACTION_TIMEOUT: process.env.NEXT_PUBLIC_TRANSACTION_TIMEOUT,
      NEXT_PUBLIC_CONFIRMATION_TIMEOUT: process.env.NEXT_PUBLIC_CONFIRMATION_TIMEOUT,
      
      // Feature flags
      NEXT_PUBLIC_ENABLE_SWAP: process.env.NEXT_PUBLIC_ENABLE_SWAP,
      NEXT_PUBLIC_ENABLE_MEV_PROTECTION: process.env.NEXT_PUBLIC_ENABLE_MEV_PROTECTION,
      NEXT_PUBLIC_ENABLE_DYNAMIC_SLIPPAGE: process.env.NEXT_PUBLIC_ENABLE_DYNAMIC_SLIPPAGE,
      NEXT_PUBLIC_ENABLE_DEVTOOLS: process.env.NEXT_PUBLIC_ENABLE_DEVTOOLS,
      
      // Cache TTLs
      NEXT_PUBLIC_TOKEN_LIST_CACHE_TTL: process.env.NEXT_PUBLIC_TOKEN_LIST_CACHE_TTL,
      NEXT_PUBLIC_PRICE_CACHE_TTL: process.env.NEXT_PUBLIC_PRICE_CACHE_TTL,
      NEXT_PUBLIC_QUOTE_CACHE_TTL: process.env.NEXT_PUBLIC_QUOTE_CACHE_TTL,
    });
    
    // Production-specific validations
    if (config.NODE_ENV === 'production') {
      if (!config.NEXT_PUBLIC_HELIUS_API_KEY) {
        throw new Error('NEXT_PUBLIC_HELIUS_API_KEY is required in production');
      }
      
      if (!config.NEXT_PUBLIC_ALCHEMY_API_KEY) {
        console.warn('‚ö†Ô∏è NEXT_PUBLIC_ALCHEMY_API_KEY not set - using fallback RPC only');
      }
      
      if (config.NEXT_PUBLIC_SOLANA_NETWORK !== 'mainnet-beta') {
        throw new Error('Production must use mainnet-beta network');
      }
    }
    
    console.log('‚úÖ Configuration validation successful');
    return config;
    
  } catch (error) {
    if (error instanceof z.ZodError) {
      console.error('‚ùå Configuration validation failed:');
      error.errors.forEach(err => {
        console.error(`  - ${err.path.join('.')}: ${err.message}`);
      });
    } else {
      console.error('‚ùå Configuration error:', error);
    }
    
    throw new Error('Invalid configuration');
  }
}

// Export validated configuration
export const config = validateConfig();

// Configuration utilities
export const isProduction = config.NODE_ENV === 'production';
export const isDevelopment = config.NODE_ENV === 'development';
export const isMainnet = config.NEXT_PUBLIC_SOLANA_NETWORK === 'mainnet-beta';
export const isDevnet = config.NEXT_PUBLIC_SOLANA_NETWORK === 'devnet';

// Feature flag utilities
export const features = {
  swap: config.NEXT_PUBLIC_ENABLE_SWAP,
  mevProtection: config.NEXT_PUBLIC_ENABLE_MEV_PROTECTION,
  dynamicSlippage: config.NEXT_PUBLIC_ENABLE_DYNAMIC_SLIPPAGE,
  devtools: config.NEXT_PUBLIC_ENABLE_DEVTOOLS,
} as const;

// API configuration
export const apiConfig = {
  jupiter: {
    baseUrl: config.NEXT_PUBLIC_JUPITER_API_URL,
    priceUrl: config.NEXT_PUBLIC_JUPITER_PRICE_API_URL,
  },
  helius: {
    apiKey: config.NEXT_PUBLIC_HELIUS_API_KEY,
    baseUrl: 'https://mainnet.helius-rpc.com',
  },
  alchemy: {
    apiKey: config.NEXT_PUBLIC_ALCHEMY_API_KEY,
    baseUrl: 'https://solana-mainnet.g.alchemy.com/v2',
  },
  coingecko: {
    apiKey: config.NEXT_PUBLIC_COINGECKO_API_KEY,
    baseUrl: 'https://api.coingecko.com/api/v3',
  },
} as const;

// Cache configuration
export const cacheConfig = {
  tokenList: config.NEXT_PUBLIC_TOKEN_LIST_CACHE_TTL,
  prices: config.NEXT_PUBLIC_PRICE_CACHE_TTL,
  quotes: config.NEXT_PUBLIC_QUOTE_CACHE_TTL,
} as const;

// Transaction configuration
export const transactionConfig = {
  defaultSlippageBps: config.NEXT_PUBLIC_DEFAULT_SLIPPAGE_BPS,
  maxSlippageBps: config.NEXT_PUBLIC_MAX_SLIPPAGE_BPS,
  defaultPriorityFee: config.NEXT_PUBLIC_DEFAULT_PRIORITY_FEE,
  timeout: config.NEXT_PUBLIC_TRANSACTION_TIMEOUT,
  confirmationTimeout: config.NEXT_PUBLIC_CONFIRMATION_TIMEOUT,
} as const;
\end{lstlisting}

\section{üîê Secure Configuration Management}

\subsection{API Key Management}

\begin{lstlisting}[style=env, caption=API Key Security Best Practices]
/**
 * Secure API Key Management
 * Handles API keys with encryption and rotation capabilities
 */

class SecureConfigManager {
  private static instance: SecureConfigManager;
  private configCache = new Map<string, { value: any; expires: number }>();
  private readonly CACHE_TTL = 5 * 60 * 1000; // 5 minutes
  
  private constructor() {
    this.validateSecurityRequirements();
  }
  
  static getInstance(): SecureConfigManager {
    if (!SecureConfigManager.instance) {
      SecureConfigManager.instance = new SecureConfigManager();
    }
    return SecureConfigManager.instance;
  }
  
  private validateSecurityRequirements(): void {
    // Ensure HTTPS in production
    if (typeof window !== 'undefined' && 
        process.env.NODE_ENV === 'production' && 
        !window.location.protocol.startsWith('https:')) {
      throw new Error('HTTPS required in production');
    }
    
    // Validate API key formats
    this.validateApiKeyFormats();
    
    // Check for development keys in production
    this.checkDevelopmentKeys();
  }
  
  private validateApiKeyFormats(): void {
    const heliusKey = process.env.NEXT_PUBLIC_HELIUS_API_KEY;
    if (heliusKey && !/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(heliusKey)) {
      console.warn('‚ö†Ô∏è Helius API key format appears invalid');
    }
    
    const alchemyKey = process.env.NEXT_PUBLIC_ALCHEMY_API_KEY;
    if (alchemyKey && !/^[A-Za-z0-9_-]{20,}$/.test(alchemyKey)) {
      console.warn('‚ö†Ô∏è Alchemy API key format appears invalid');
    }
  }
  
  private checkDevelopmentKeys(): void {
    if (process.env.NODE_ENV === 'production') {
      const devPatterns = [
        'test',
        'dev',
        'demo',
        'example',
        'placeholder',
        'your-api-key',
      ];
      
      Object.entries(process.env).forEach(([key, value]) => {
        if (key.includes('API_KEY') && value) {
          const lowerValue = value.toLowerCase();
          if (devPatterns.some(pattern => lowerValue.includes(pattern))) {
            console.error(`‚ùå Development API key detected in production: ${key}`);
          }
        }
      });
    }
  }
  
  getApiKey(service: 'helius' | 'alchemy' | 'coingecko'): string | null {
    const cacheKey = `api_key_${service}`;
    const cached = this.configCache.get(cacheKey);
    
    if (cached && Date.now() < cached.expires) {
      return cached.value;
    }
    
    let apiKey: string | null = null;
    
    switch (service) {
      case 'helius':
        apiKey = process.env.NEXT_PUBLIC_HELIUS_API_KEY || null;
        break;
      case 'alchemy':
        apiKey = process.env.NEXT_PUBLIC_ALCHEMY_API_KEY || null;
        break;
      case 'coingecko':
        apiKey = process.env.NEXT_PUBLIC_COINGECKO_API_KEY || null;
        break;
    }
    
    // Cache the result
    this.configCache.set(cacheKey, {
      value: apiKey,
      expires: Date.now() + this.CACHE_TTL,
    });
    
    return apiKey;
  }
  
  getRpcEndpoint(service: 'helius' | 'alchemy', withApiKey = true): string | null {
    const apiKey = this.getApiKey(service);
    
    if (!apiKey && withApiKey) {
      return null;
    }
    
    switch (service) {
      case 'helius':
        return apiKey 
          ? `https://mainnet.helius-rpc.com/?api-key=${apiKey}`
          : 'https://eclipse.helius-rpc.com/';
      case 'alchemy':
        return apiKey 
          ? `https://solana-mainnet.g.alchemy.com/v2/${apiKey}`
          : null;
      default:
        return null;
    }
  }
  
  // Rotate API keys (for future implementation)
  async rotateApiKey(service: string): Promise<void> {
    console.log(`üîÑ API key rotation requested for ${service}`);
    // Implementation would depend on the service's API key rotation mechanism
    // This would typically involve:
    // 1. Generate new API key via service API
    // 2. Update environment variables
    // 3. Clear cache
    // 4. Notify monitoring systems
    
    this.configCache.delete(`api_key_${service}`);
  }
  
  // Health check for API keys
  async validateApiKeys(): Promise<Record<string, boolean>> {
    const results: Record<string, boolean> = {};
    
    // Test Helius API key
    const heliusKey = this.getApiKey('helius');
    if (heliusKey) {
      try {
        const response = await fetch(`https://mainnet.helius-rpc.com/?api-key=${heliusKey}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            jsonrpc: '2.0',
            id: 1,
            method: 'getHealth',
          }),
        });
        results.helius = response.ok;
      } catch {
        results.helius = false;
      }
    } else {
      results.helius = false;
    }
    
    // Test Alchemy API key
    const alchemyKey = this.getApiKey('alchemy');
    if (alchemyKey) {
      try {
        const response = await fetch(`https://solana-mainnet.g.alchemy.com/v2/${alchemyKey}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            jsonrpc: '2.0',
            id: 1,
            method: 'getHealth',
          }),
        });
        results.alchemy = response.ok;
      } catch {
        results.alchemy = false;
      }
    } else {
      results.alchemy = false;
    }
    
    return results;
  }
}

export const secureConfig = SecureConfigManager.getInstance();
\end{lstlisting}

\section{üéØ Conclusion}

This comprehensive configuration management guide ensures secure, scalable, and maintainable configuration for the Jupiter Swap DApp across all environments.

\subsection{Configuration Summary}

\begin{tcolorbox}[colback=successGreen!10,colframe=successGreen]
\textbf{‚öôÔ∏è Configuration Management Achievements:}
\begin{itemize}
    \item \textbf{15+ Environment Variables:} Complete configuration coverage
    \item \textbf{Multi-stage Configuration:} Development, staging, production
    \item \textbf{Runtime Validation:} Zod schema validation
    \item \textbf{Secure API Keys:} Encrypted and validated
    \item \textbf{Fallback Mechanisms:} Graceful degradation
    \item \textbf{Performance Optimization:} Cached configuration
    \item \textbf{Development Efficiency:} Hot reload support
    \item \textbf{Production Security:} Strict validation and monitoring
\end{itemize}
\end{tcolorbox}

\vspace{1cm}

\begin{center}
\textit{Configuration management system designed and implemented by Kamel (\href{https://x.com/treizeb__}{@treizeb\_\_})\\
DeAura.io - July 2025}
\end{center}

\end{document}

